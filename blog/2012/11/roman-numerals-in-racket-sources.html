<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Roman Numerals in Racket Sources</title>
    <meta name="description" content="_posted by Shriram Krishnamurthi_  The other day, while discussing Church numerals in class, I pointed out that Racket could support Roman numeral in source programs. The essence of the idea is that, whenever an unbound identifier matches the syntax of a ...">
    <meta name="author"      content="The Unknown Author">
    <meta name="keywords"    content="">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://blog.racket-lang.org/2012/11/roman-numerals-in-racket-sources.html">
    <link rel="next" href="/2012/11/drracket-now-more-responsive.html">
    <link rel="prev" href="/2012/11/tutorial-contributing-to-racket.html">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/css/blog-fonts.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml" href="/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    </head>
  <body>
<row class="one-column" id="logo"><col-1><a href="http://racket-lang.org"><div><img class="legacy-logo" src="/img/logo-and-text-inverted.png"/></div></a></col-1><col-2><p><a href="/index.html">blog</a></p></col-2></row>
<article>
<row>

<col-1>
  <p class='date-and-tags'>23 Nov 2012</p>

</col-1>

<col-2>
  <header>
  <h1>Roman Numerals in Racket Sources</h1>
  </header>

<p><em>posted by Shriram Krishnamurthi</em></p>

<p>The other day, while discussing Church numerals in class, I pointed out that Racket could support Roman numeral in source programs. The essence of the idea is that, whenever an unbound identifier matches the syntax of a Roman numeral, it is automatically converted into the corresponding number.</p>

<p>The implementation of this is <a href="https://github.com/shriram/roman-numerals">here</a>. The <a href="https://github.com/shriram/roman-numerals/blob/master/test-client.rkt">test client</a> best illustrates this in action. For instance, here is a valid test case:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">square</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="n">x</span><span class="p">))</span>
<span class="p">(</span><span class="n">check-equal?</span> <span class="p">(</span><span class="n">square</span> <span class="n">X</span><span class="p">)</span> <span class="n">C</span><span class="p">)</span>
</pre></div>

</div>

<p>The essence of the implementation is just this macro:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k">define-syntax</span> <span class="p">(</span><span class="n">handle-id</span> <span class="n">stx</span><span class="p">)</span>
  <span class="p">(</span><span class="k">syntax-case</span> <span class="n">stx</span> <span class="p">()</span>
    <span class="p">[(</span><span class="k">_</span> <span class="o">.</span> <span class="k">any</span><span class="p">)</span>
     <span class="p">(</span><span class="k">let</span> <span class="p">([</span><span class="n">str</span> <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="p">(</span><span class="nb">syntax-&gt;datum</span> <span class="o">#&#39;</span><span class="k">any</span><span class="p">))])</span>
       <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">roman-string?</span> <span class="n">str</span><span class="p">)</span>
           <span class="p">(</span><span class="k">with-syntax</span> <span class="p">[(</span><span class="n">n</span> <span class="p">(</span><span class="nb">datum-&gt;syntax</span> <span class="n">stx</span> <span class="p">(</span><span class="n">roman-&gt;number</span> <span class="n">str</span><span class="p">)))]</span>
             <span class="o">#&#39;</span><span class="p">(</span><span class="k">#%datum</span> <span class="o">.</span> <span class="n">n</span><span class="p">))</span>
           <span class="o">#&#39;</span><span class="p">(</span><span class="k">#%top</span> <span class="o">.</span> <span class="k">any</span><span class="p">)))]))</span>
</pre></div>

</div>
<!-- more-->

<hr />

<p>I(define MMMMM &ldquo;that is especially delicious!&rdquo;)</p>

<p>— <em>steck, 23 November 2012</em></p>

<hr />

<p>It&rsquo;s a great setup for counters, too: (do ((i i …)) …)</p>

<p>— <em>YeshuaAaron, 23 November 2012</em></p>

<hr />
<col-2>

</row>

<footer>
<row>
<col-1>
</col-1>
<col-2>
<h2><span class="label">next</span> <a class="next" href="/2012/11/tutorial-contributing-to-racket.html">Tutorial: Contributing to Racket</a></h2>

<h2><span class="label">prev</span> <a class="previous" href="/2012/11/drracket-now-more-responsive.html">DrRacket, now more responsive</a></h2>

</col-2>
</row>
</footer>

</article>

<row class="one-column" id="bottom"><col-1></col-1><col-2>
<p>Made with <a href="https://github.com/greghendershott/frog">Frog</a>, a static-blog generator written in Racket.
<br /><a href="https://github.com/racket/racket-lang-org">Source code</a> for this blog.</col-2></row>
  </body>
</html>