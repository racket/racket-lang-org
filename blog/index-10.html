<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Racket Blog (page 10)</title>
    <meta name="description" content="Racket Blog (page 10)">
    <meta name="author"      content="The Unknown Author">
    <meta name="keywords"    content="all">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://blog.racket-lang.org/index-10.html">


    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/css/blog-fonts.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml" href="/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    </head>
  <body>
<row class="one-column" id="logo"><col-1><a href="http://racket-lang.org"><div id="logo-container"><img id="logo" src="/img/racket-logo.svg"/> Racket</div></a></col-1><col-2><p><a href="/index.html">blog</a></p></col-2></row>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>24 Feb 2009</p></col-1>

<col-2>
  <h1><a href='/2009/02/call-for-participation-writing-typed-scheme-wrapper-modules.html'>Call for Participation: Writing Typed Scheme wrapper modules</a></h1>
  <div class="truncate">
<p><em>posted by Sam Tobin-Hochstadt</em></p>

<p>Typed Scheme is a language for writing PLT Scheme programs that are statically checked for type errors. Right now, Typed Scheme handles a large portion of the PLT Scheme language. However, to use Typed Scheme effectively, we need libraries that work with it. For this task, we&rsquo;re looking for help.</p>

<p>We&rsquo;d like volunteers for writing wrapper modules that adapt untyped libraries to Typed Scheme. This task is very easy for the smallest libraries, but can be much more complicated for larger, complex libraries.</p>

<p>There&rsquo;s a preliminary guide for conversion <a href="http://www.ccs.neu.edu/home/samth/adapt/">here</a> and a list of modules to adapt, and their current status is available <a href="http://www.ccs.neu.edu/home/samth/adapt/Current_Status.html">here</a>.</p>

<p>Questions about this project, and about developing with Typed Scheme in general, can be asked on <a href="mailto:plt-dev@list.cs.brown.edu">plt-dev@list.cs.brown.edu</a> , and questions or comments can be sent directly to me.</p>

<p>We hope to continue making Typed Scheme into a useful tool for PLT Scheme programmers.</p>

<p>Thanks,</p>

<p>Sam, Stevie, and Matthias</p></div>
  <a class="more" href='/2009/02/call-for-participation-writing-typed-scheme-wrapper-modules.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>18 Feb 2009</p></col-1>

<col-2>
  <h1><a href='/2009/02/steering-scheme.html'>Steering Scheme</a></h1>
  <div class="truncate">
<p><em>posted by matthias</em></p>

<p>Election time is here again. A couple more days and the Scheme community will have a set of new steer-ers.</p>

<p>What should we want from a steering committee?</p>

<p>I have argued at this place before that good language design needs a feedback loop. Language designers write down specs; language implementers translate those specs into compilers and interpreters; programmers use these implementations to produce useful software. The loop comes in when implementers inform designers of flaws, inconsistencies, mistakes, errors, and other internal consistency problems in the specs. This is clearly happening with R6RS, and it is good. Implementers are a biased bunch, however. After all, they work on just one kind of program, and in a highly specialized domain that has been mined for a long time. How can you trust them? [*]</p>

<p>The loop becomes truly useful when people write large software systems (not just compilers, because they really are special cases!) and find that the language fails them in some way. Such failures can come in a number of flavors. For a document such as R6RS, we should hope that programmers can discover problems with porting systems that are apparently due to ambiguities, flaws, mistakes, roaches in the actual document (as opposed to a specific implementation).</p>

<p>So what does this have to do with the steering committee?</p>

<p>The last thing we want from a steering committee is a radical commitment to change (whatever it may be); a prejudice concerning R6RS; a closed mind about the size of &ldquo;Scheme&rdquo; (it&rsquo;s too large, it&rsquo;s too small); a willingness to steer without making observations. A steering committee of overbearing curmudgeons is <em>not</em> what we want.</p>

<p>What we do want is a committee that is willing to figure out how the listening is going to happen; how we can possibly finance a systematic way of listening (writing NSF grants, anyone?); how the feedback is best channeled into language design.</p>

<p>Let&rsquo;s hope we get such a steering committee. The Scheme community deserves it.</p>

<p>[*] No I am not naive enough to think that language implementers don&rsquo;t design languages, and that implementers don&rsquo;t program systems other than implementations. I am just skeptical that it is easy for them to separate out their various roles in an objective manner, even if many of them are able to think at several different levels about programs.</p></div>
  <a class="more" href='/2009/02/steering-scheme.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>14 Feb 2009</p></col-1>

<col-2>
  <h1><a href='/2009/02/new-contract-related-features.html'>New Contract-Related Features</a></h1>
  <div class="truncate">
<p><em>posted by Stevie</em></p>

<p>In SVN I&rsquo;ve added three new major features that involve contracts. One allows for more fine-grained control of contracts, and the other two allow for the use of contracts with signatures and units.</p>

<h2 id="contract-regions">Contract Regions</h2>

<p><em>Contract regions</em> allow the programmer to protect a region of code with a contract boundary. In addition to the wrapped code, the programmer also provides a name for the region which is used in blame situations and a list of exported variables which can either be protected with contracts or unprotected. The region provides a true contract boundary, in that uses of contracted exports within the region are unprotected. Contract regions are specified with the <code>with-contract</code> form. The following contract region defines two mutually recursive functions:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/region..rkt)._with-contract))" style="color: inherit">with-contract</a></span> <span class="n">region1</span>
 <span class="p">([</span><span class="n">f</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" style="color: inherit">boolean?</a></span><span class="p">)]</span>
  <span class="p">[</span><span class="n">g</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" style="color: inherit">boolean?</a></span><span class="p">)])</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">f</span> <span class="n">n</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((quote._~23~25kernel)._if))" style="color: inherit">if</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._zero~3f))" style="color: inherit">zero?</a></span> <span class="n">n</span><span class="p">)</span> <span class="no">#f</span> <span class="p">(</span><span class="n">g</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._sub1))" style="color: inherit">sub1</a></span> <span class="n">n</span><span class="p">))))</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">g</span> <span class="n">n</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((quote._~23~25kernel)._if))" style="color: inherit">if</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._zero~3f))" style="color: inherit">zero?</a></span> <span class="n">n</span><span class="p">)</span> <span class="no">#t</span> <span class="p">(</span><span class="n">f</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._sub1))" style="color: inherit">sub1</a></span> <span class="n">n</span><span class="p">)))))</span>
 <span class="o">```</span>

<span class="ss">The</span> <span class="n">internal</span> <span class="n">calls</span> <span class="n">to</span> <span class="o">`</span><span class="ss">f</span><span class="o">`</span> <span class="ss"><a href="http://docs.racket-lang.org/reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" style="color: inherit">and</a></span> <span class="o">`</span><span class="ss">g</span><span class="o">`</span> <span class="ss">are</span> <span class="n">uncontracted</span><span class="o">,</span> <span class="n">but</span> <span class="n">calls</span> <span class="n">to</span> <span class="o">`</span><span class="ss">f</span><span class="o">`</span><span class="ss"><a href="http://docs.racket-lang.org/reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" style="color: inherit">and</a></span> <span class="o">`</span><span class="ss">g</span><span class="o">`</span> <span class="ss">outside</span> <span class="k"><a href="http://docs.racket-lang.org/reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._this))" style="color: inherit">this</a></span> <span class="n">region</span> <span class="n">would</span> <span class="n">be</span> <span class="n">appropriately</span> <span class="n">contracted.</span>  <span class="n">First-order</span> <span class="n">checks</span> <span class="n">are</span> <span class="n">performed</span> <span class="n">at</span> <span class="n">the</span> <span class="n">region</span><span class="o">,</span> <span class="n">so</span> <span class="n">the</span>
<span class="n">following</span> <span class="n">region:</span>

<span class="o">```</span><span class="ss">racket</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/region..rkt)._with-contract))" style="color: inherit">with-contract</a></span> <span class="n">region2</span>
 <span class="p">([</span><span class="n">n</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span><span class="p">])</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">n</span> <span class="no">#t</span><span class="p">))</span>
 <span class="o">```</span>

<span class="ss">results</span> <span class="n">in</span> <span class="n">the</span> <span class="n">following</span> <span class="n">error:</span>

<span class="o">```</span><span class="ss">racket</span>
<span class="p">(</span><span class="n">region</span> <span class="n">region2</span><span class="p">)</span> <span class="n">broke</span> <span class="n">the</span> <span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/private/base..rkt)._contract))" style="color: inherit">contract</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span> <span class="n">on</span> <span class="n">n</span><span class="c1">; expected &lt;number?&gt;, given: #t</span>
</pre></div>

</div>

<p>Notice that the blame not only gives the name of the region, but describes what type of contract boundary was involved.</p>

<p>For contracting a single definition, there is the <code>define/contract</code> form which has a similar syntax to define, except that it takes a contract before the body of the definition.</p>

<p>To compare the two forms, the following two definitions are equivalent:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/region..rkt)._with-contract))" style="color: inherit">with-contract</a></span> <span class="n">fact</span>
 <span class="p">([</span><span class="n">fact</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span><span class="p">)])</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">fact</span> <span class="n">n</span><span class="p">)</span>
   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((quote._~23~25kernel)._if))" style="color: inherit">if</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._zero~3f))" style="color: inherit">zero?</a></span> <span class="n">n</span><span class="p">)</span> <span class="mi">1</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" style="color: inherit">*</a></span> <span class="n">n</span> <span class="p">(</span><span class="n">fact</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._sub1))" style="color: inherit">sub1</a></span> <span class="n">n</span><span class="p">))))))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/region..rkt)._define/contract))" style="color: inherit">define/contract</a></span> <span class="p">(</span><span class="n">fact</span> <span class="n">n</span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((quote._~23~25kernel)._if))" style="color: inherit">if</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._zero~3f))" style="color: inherit">zero?</a></span> <span class="n">n</span><span class="p">)</span> <span class="mi">1</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" style="color: inherit">*</a></span> <span class="n">n</span> <span class="p">(</span><span class="n">fact</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._sub1))" style="color: inherit">sub1</a></span> <span class="n">n</span><span class="p">)))))</span>
</pre></div>

</div>

<p>First order checks are similarly performed at the definition for <code>define/contract</code>, so</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/region..rkt)._define/contract))" style="color: inherit">define/contract</a></span> <span class="p">(</span><span class="n">fact</span> <span class="n">n</span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((quote._~23~25kernel)._if))" style="color: inherit">if</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._zero~3f))" style="color: inherit">zero?</a></span> <span class="n">n</span><span class="p">)</span> <span class="mi">1</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" style="color: inherit">*</a></span> <span class="n">n</span> <span class="p">(</span><span class="n">fact</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._sub1))" style="color: inherit">sub1</a></span> <span class="n">n</span><span class="p">)))))</span>
</pre></div>

</div>

<p>results in</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="n">function</span> <span class="n">fact</span><span class="p">)</span> <span class="n">broke</span> <span class="n">the</span> <span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/private/base..rkt)._contract))" style="color: inherit">contract</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" style="color: inherit">number?</a></span><span class="p">)</span> <span class="n">on</span> <span class="n">fact</span><span class="c1">; expected a procedure that accepts no arguments without any keywords, given: #&lt;procedure:fact&gt;</span>
</pre></div>

</div>

<h2 id="signature-contracts">Signature Contracts</h2>

<p>In addition to contract regions, units are also now contract boundaries. One way to use contracts with units is to add contracts to unit signatures via the contracted <code>signature</code> form.</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._define-signature))" style="color: inherit">define-signature</a></span> <span class="n">toy-factory^</span>
 <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._contracted))" style="color: inherit">contracted</a></span>
   <span class="p">[</span><span class="n">build-toys</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._integer~3f))" style="color: inherit">integer?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/base..rkt)._listof))" style="color: inherit">listof</a></span> <span class="n">toy?</span><span class="p">))]</span>
   <span class="p">[</span><span class="n">repaint</span>    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span> <span class="n">toy?</span><span class="p">)]</span>
   <span class="p">[</span><span class="n">toy?</span>       <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" style="color: inherit">any/c</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" style="color: inherit">boolean?</a></span><span class="p">)]</span>
   <span class="p">[</span><span class="n">toy-color</span>  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span><span class="p">)])))</span>
</pre></div>

</div>

<p>Notice that contracts in a signature can use variables listed in the signature.Now if we take the following implementation of that signature:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/linkinference.html#(form._((lib._racket/unit..rkt)._define-unit))" style="color: inherit">define-unit</a></span> <span class="n">simple-factory@</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="n">toy-factory^</span><span class="p">)</span>

 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define-struct.html#(form._((lib._racket/private/base..rkt)._define-struct))" style="color: inherit">define-struct</a></span> <span class="n">toy</span> <span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="kd">#:transparent</span><span class="p">)</span>

 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">build-toys</span> <span class="n">n</span><span class="p">)</span>
   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/for.html#(form._((lib._racket/private/base..rkt)._for/list))" style="color: inherit">for/list</a></span> <span class="p">([</span><span class="n">i</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/sequences.html#(def._((lib._racket/private/base..rkt)._in-range))" style="color: inherit">in-range</a></span> <span class="n">n</span><span class="p">)])</span>
     <span class="p">(</span><span class="n">make-toy</span> <span class="o">'</span><span class="ss">blue</span><span class="p">)))</span>

 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">repaint</span> <span class="n">t</span> <span class="n">col</span><span class="p">)</span>
   <span class="p">(</span><span class="n">make-toy</span> <span class="n">col</span><span class="p">)))</span>
</pre></div>

</div>

<p>We get the appropriate contract checks on those exports:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/linkinference.html#(form._((lib._racket/unit..rkt)._define-values/invoke-unit/infer))" style="color: inherit">define-values/invoke-unit/infer</a></span> <span class="n">simple-factory@</span><span class="p">)</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="n">build-toys</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="o">#</span><span class="p">(</span><span class="ss">struct:toy</span> <span class="ss">blue</span><span class="p">)</span> <span class="o">#</span><span class="p">(</span><span class="ss">struct:toy</span> <span class="ss">blue</span><span class="p">)</span> <span class="o">#</span><span class="p">(</span><span class="ss">struct:toy</span> <span class="ss">blue</span><span class="p">))</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="n">build-toys</span> <span class="no">#f</span><span class="p">)</span>
<span class="n">top-level</span> <span class="n">broke</span> <span class="n">the</span> <span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/private/base..rkt)._contract))" style="color: inherit">contract</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._integer~3f))" style="color: inherit">integer?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/base..rkt)._listof))" style="color: inherit">listof</a></span> <span class="n">toy?</span><span class="p">))</span>
 <span class="n">on</span> <span class="n">build-toys</span><span class="c1">; expected &gt;, given: #f</span>
</pre></div>

</div>

<p>As before, uses of contracted exports inside the unit are not checked.</p>

<p>Since units are contract boundaries, they can be blamed appropriately. Take the following definitions:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/linkinference.html#(form._((lib._racket/unit..rkt)._define-unit))" style="color: inherit">define-unit</a></span> <span class="n">factory-user@</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span> <span class="n">toy-factory^</span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" style="color: inherit">let</a></span> <span class="p">([</span><span class="n">toys</span> <span class="p">(</span><span class="n">build-toys</span> <span class="mi">3</span><span class="p">)])</span>
   <span class="p">(</span><span class="n">repaint</span> <span class="mi">3</span> <span class="o">'</span><span class="ss">blue</span><span class="p">)))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/linkinference.html#(form._((lib._racket/unit..rkt)._define-compound-unit/infer))" style="color: inherit">define-compound-unit/infer</a></span> <span class="n">factory+user@</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._link))" style="color: inherit">link</a></span> <span class="n">simple-factory@</span> <span class="n">factory-user@</span><span class="p">))</span>
<span class="n">When</span> <span class="n">we</span> <span class="n">invoke</span> <span class="n">the</span> <span class="n">combined</span> <span class="n">unit:&gt;</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/linkinference.html#(form._((lib._racket/unit..rkt)._define-values/invoke-unit/infer))" style="color: inherit">define-values/invoke-unit/infer</a></span> <span class="n">factory+user@</span><span class="p">)</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._unit))" style="color: inherit">unit</a></span> <span class="n">factory-user@</span><span class="p">)</span> <span class="n">broke</span> <span class="n">the</span> <span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/private/base..rkt)._contract))" style="color: inherit">contract</a></span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span> <span class="n">toy?</span><span class="p">)</span>
<span class="n">on</span> <span class="n">repaint</span><span class="c1">; expected &gt;, given: 3</span>
</pre></div>

</div>

<h2 id="unit-contracts">Unit Contracts</h2>

<p>However, we may not always be able to add contracts to signatures. For example, there are many already-existing signatures in PLT Scheme that one may want to implement, or a programmer may want to take a unit value and add contracts to it after the fact.</p>

<p>To do this, there is the <code>unit/c</code> contract combinator. It takes a list of imports and exports, where each signature is paired with a list of variables and their contracts for each signature. So if we had the uncontracted version of the toy-factory^ signature:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._define-signature))" style="color: inherit">define-signature</a></span> <span class="n">toy-factory^</span>
 <span class="p">(</span><span class="n">build-toys</span> <span class="n">repaint</span> <span class="n">toy?</span> <span class="n">toy-color</span><span class="p">))</span>
</pre></div>

</div>

<p>the following contracts would be appropriate for a unit that imports nothing and exports that signature:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/unitcontracts.html#(form._((lib._racket/unit..rkt)._unit/c))" style="color: inherit">unit/c</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span><span class="p">))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/unitcontracts.html#(form._((lib._racket/unit..rkt)._unit/c))" style="color: inherit">unit/c</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="n">toy-factory^</span><span class="p">))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/unitcontracts.html#(form._((lib._racket/unit..rkt)._unit/c))" style="color: inherit">unit/c</a></span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="p">(</span><span class="n">toy-factory^</span>
          <span class="p">[</span><span class="n">toy-color</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span><span class="p">)])))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/unitcontracts.html#(form._((lib._racket/unit..rkt)._unit/c))" style="color: inherit">unit/c</a></span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="p">(</span><span class="n">toy-factory^</span>
          <span class="p">[</span><span class="n">build-toys</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._integer~3f))" style="color: inherit">integer?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/base..rkt)._listof))" style="color: inherit">listof</a></span> <span class="n">toy?</span><span class="p">))]</span>
          <span class="p">[</span><span class="n">repaint</span>    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span> <span class="n">toy?</span><span class="p">)]</span>
          <span class="p">[</span><span class="n">toy?</span>       <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" style="color: inherit">any/c</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" style="color: inherit">boolean?</a></span><span class="p">)]</span>
          <span class="p">[</span><span class="n">toy-color</span>  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span><span class="p">)])))</span>
</pre></div>

</div>

<p>Unit contracts can contain a superset of the import signatures and a subset of the export signatures for a given unit value. Also, variables that are not listed for a given signature are left alone when the contracts are being added.</p>

<p>Since the results of applying <code>unit/c</code> is a new unit, then adding a contract can cause link inference to fail. For example, if we change the definition of <code>simple-factory@</code> above to</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/attaching-contracts-to-values.html#(form._((lib._racket/contract/region..rkt)._define/contract))" style="color: inherit">define/contract</a></span> <span class="n">simple-factory@</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/unitcontracts.html#(form._((lib._racket/unit..rkt)._unit/c))" style="color: inherit">unit/c</a></span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="p">(</span><span class="n">toy-factory^</span>
           <span class="p">[</span><span class="n">build-toys</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._integer~3f))" style="color: inherit">integer?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/base..rkt)._listof))" style="color: inherit">listof</a></span> <span class="n">toy?</span><span class="p">))]</span>
           <span class="p">[</span><span class="n">repaint</span>    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span> <span class="n">toy?</span><span class="p">)]</span>
           <span class="p">[</span><span class="n">toy?</span>       <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" style="color: inherit">any/c</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" style="color: inherit">boolean?</a></span><span class="p">)]</span>
           <span class="p">[</span><span class="n">toy-color</span>  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span><span class="p">)])))</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._unit))" style="color: inherit">unit</a></span>
   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span>
   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="n">toy-factory^</span><span class="p">)</span>

   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define-struct.html#(form._((lib._racket/private/base..rkt)._define-struct))" style="color: inherit">define-struct</a></span> <span class="n">toy</span> <span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="kd">#:transparent</span><span class="p">)</span>

   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">build-toys</span> <span class="n">n</span><span class="p">)</span>
     <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/for.html#(form._((lib._racket/private/base..rkt)._for/list))" style="color: inherit">for/list</a></span> <span class="p">([</span><span class="n">i</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/sequences.html#(def._((lib._racket/private/base..rkt)._in-range))" style="color: inherit">in-range</a></span> <span class="n">n</span><span class="p">)])</span>
       <span class="p">(</span><span class="n">make-toy</span> <span class="o">'</span><span class="ss">blue</span><span class="p">)))</span>

   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">repaint</span> <span class="n">t</span> <span class="n">col</span><span class="p">)</span>
     <span class="p">(</span><span class="n">make-toy</span> <span class="n">col</span><span class="p">))))</span>
</pre></div>

</div>

<p>Then when we try to combine it with the <code>factory-user@</code> unit, we get:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="n">define-compound-unit/infer:</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._not))" style="color: inherit">not</a></span> <span class="n">a</span> <span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._unit))" style="color: inherit">unit</a></span> <span class="n">definition</span> <span class="n">in:</span> <span class="n">simple-factory@</span>
</pre></div>

</div>

<p>One way to solve this is to use <code>define-unit-binding</code> to set up the static information for the new contracted value. Another possibility for unit definitions is to use <code>define-unit/contract</code>:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/unitcontracts.html#(form._((lib._racket/unit..rkt)._define-unit/contract))" style="color: inherit">define-unit/contract</a></span> <span class="n">simple-factory@</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._import))" style="color: inherit">import</a></span><span class="p">)</span>
 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._export))" style="color: inherit">export</a></span> <span class="p">(</span><span class="n">toy-factory^</span>
          <span class="p">[</span><span class="n">build-toys</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/number-types.html#(def._((quote._~23~25kernel)._integer~3f))" style="color: inherit">integer?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/base..rkt)._listof))" style="color: inherit">listof</a></span> <span class="n">toy?</span><span class="p">))]</span>
          <span class="p">[</span><span class="n">repaint</span>    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span> <span class="n">toy?</span><span class="p">)]</span>
          <span class="p">[</span><span class="n">toy?</span>       <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" style="color: inherit">any/c</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" style="color: inherit">boolean?</a></span><span class="p">)]</span>
          <span class="p">[</span><span class="n">toy-color</span>  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" style="color: inherit">-&gt;</a></span> <span class="n">toy?</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" style="color: inherit">symbol?</a></span><span class="p">)]))</span>

 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define-struct.html#(form._((lib._racket/private/base..rkt)._define-struct))" style="color: inherit">define-struct</a></span> <span class="n">toy</span> <span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="kd">#:transparent</span><span class="p">)</span>

 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">build-toys</span> <span class="n">n</span><span class="p">)</span>
   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/for.html#(form._((lib._racket/private/base..rkt)._for/list))" style="color: inherit">for/list</a></span> <span class="p">([</span><span class="n">i</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/sequences.html#(def._((lib._racket/private/base..rkt)._in-range))" style="color: inherit">in-range</a></span> <span class="n">n</span><span class="p">)])</span>
     <span class="p">(</span><span class="n">make-toy</span> <span class="o">'</span><span class="ss">blue</span><span class="p">)))</span>

 <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">repaint</span> <span class="n">t</span> <span class="n">col</span><span class="p">)</span>
   <span class="p">(</span><span class="n">make-toy</span> <span class="n">col</span><span class="p">)))</span>
</pre></div>

</div>

<p>More about these features can be found in the Reference, and a short section about signature and unit contracts has been added to the Guide.</p></div>
  <a class="more" href='/2009/02/new-contract-related-features.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>29 Jan 2009</p></col-1>

<col-2>
  <h1><a href='/2009/01/cfp-scheme-workshop-2009.html'>CfP: Scheme Workshop 2009!</a></h1>
  <div class="truncate">
<p><em>posted by John Clements</em></p>

<p>SCHEME AND FUNCTIONAL PROGRAMMING WORKSHOP 2009:  Cambridge, Massachusetts:   August 22, 2009:  call for papers:  <a href="http://www.schemeworkshop.org/2009/">http://www.schemeworkshop.org/2009/</a>:</p>

<p>The Scheme and Functional Programming Workshop showcases research and experience related to Scheme, and more broadly to all aspects of functional programming.</p>

<p>Areas of interest include:</p>

<ul>
 <li>
  <p>Language Design, Type Systems, Theory</p></li>
 <li>
  <p>Program Development Environments, Education</p></li>
 <li>
  <p>Agile Methodologies, Lightweight Software Engineering</p></li>
 <li>
  <p>Applications, Implementation, and Experience</p></li>
 <li>
  <p>SRFIs!</p></li></ul>

<p>In addition to technical papers on matters of programming-language research, we encourage submissions that present experience or innovation with a particular project. The key criterion for any paper&mdash;technical or not&mdash;is that it makes a contribution from which other practitioners can benefit.</p>

<p>Dates::</p>

<p>Dates are firm, and will not be extended. Please plan accordingly.</p>

<ul>
 <li>
  <p>Submission Deadline: June 5, 2009 (FIRM)</p></li>
 <li>
  <p>Author Notification: June 26, 2009</p></li>
 <li>
  <p>Final Papers Due: July 24, 2009</p></li>
 <li>
  <p>Workshop: August 22, 2009</p></li></ul>

<p>Program Committee::</p>

<ul>
 <li>
  <p>John Clements, Cal Poly State University (organizer &amp; chair)</p></li>
 <li>
  <p>Dominique Boucher, Nu Echo</p></li>
 <li>
  <p>Abdulaziz Ghuloum, Indiana University</p></li>
 <li>
  <p>David Herman, Northeastern University</p></li>
 <li>
  <p>Shriram Krishnamurthi, Brown University</p></li>
 <li>
  <p>Matthew Might, University of Utah</p></li>
 <li>
  <p>David Van Horn, Northeastern University</p></li></ul>

<p>Publication Policy::</p>

<p>Submitted papers must have content that has not previously been published in other conferences or refereed venues, and simultaneous submission to other conferences or refereed venues is unacceptable.</p>

<p>Publication of a paper at this workshop is not intended to replace conference or journal publication, and does not preclude re-publication of a more complete or finished version of the paper at some later conference or in a journal.</p>

<p>Submission Instructions::</p>

<p>Your submissions should be no longer than 12 pages, including bibliography and appendices. Papers may be shorter than this limit, and the Program Committee encourages authors to submit shorter papers where appropriate.</p>

<p>The conference web page (URL above) contains detailed formatting instructions and LaTeX support files.</p>

<p>Submit your papers using the Continue 2.0 submission server, at the URL:</p>

<p><a href="http://continue2.cs.brown.edu/scheme2009/">http://continue2.cs.brown.edu/scheme2009/</a></p>

<p>We look forward to reading your papers!</p></div>
  <a class="more" href='/2009/01/cfp-scheme-workshop-2009.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>21 Jan 2009</p></col-1>

<col-2>
  <h1><a href='/2009/01/plt-scheme-v414.html'>PLT Scheme v4.1.4</a></h1>
  <div class="truncate">
<p><em>posted by Eli Barzilay</em></p>

<p>PLT Scheme version 4.1.4 is now available from  <a href="http://plt-scheme.org/">http://plt-scheme.org/</a></p>

<ul>
 <li>
  <p>New libraries include <code>scheme/package' (for nestable static modules) and</code>ffi/objc&rsquo; (support for Objective-C).</p></li>
 <li>
  <p>New teaching support includes a &ldquo;universe.ss&rdquo; teachpack for connecting &ldquo;worlds&rdquo; over a network.</p></li>
 <li>
  <p>Redex now supports automatic test-case generation. Specify a predicate that should hold of your reduction system, and Redex will attempt to falsify it. See &lsquo;redex-check&rsquo; in the manual for more details.</p></li>
 <li>
  <p>Improvements to the run-time system include better and more reliable memory-limit tracking, function contracts that preserve tail recursion in many cases, native debugging backtraces on x86_64, and performance improvements.</p></li>
 <li>
  <p>Improved libraries include enhancements to <code>scheme/sandbox', better handling of zero-sized matches by</code>regexp-split&rsquo; and friends, an <code>equal&gt;' interface for specifying equality on class instances (and more general support for attaching properties to interfaces), equality (via</code>equal&gt;&rsquo;) for image objects, and refinements to `scheme/foreign&rsquo; to support atomic operations and function-pointer conversions.</p></li></ul>

<p>[Note that mirror sites can take a while to catch up with the new downloads.]</p>

<p>Feedback Welcome.</p></div>
  <a class="more" href='/2009/01/plt-scheme-v414.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>24 Nov 2008</p></col-1>

<col-2>
  <h1><a href='/2008/11/simple-gnuplotting.html'>Simple GnuPLoTting</a></h1>
  <div class="truncate">
<p><em>posted by vyzo</em></p>

<p><a href="http://www.gnuplot.info/">gnuplot</a> is a very powerful and widely used interactive data plotting program. It can generate two-dimenational and three-dimensional surface plots, either on screen or print to files with a wide-array of supported formats. If you are not familiar with it, you can get an idea of its capabilities <a href="http://gnuplot.sourceforge.net/demo/">here</a></p>

<p>A new package, <a href="http://planet.plt-scheme.org/display.ss?package=gnuplot.plt&amp;amp;owner=vyzo">gnuplot.plt</a>, is now available on planet which allows you to programmatically interact with gnuplot processes and generate plots on the fly. The package provides a simple interface that abstracts gnuplot&rsquo;s quirky syntax and takes care of data marshalling using temporary files.</p>

<p>Without further ado, here is to every computer scientist&rsquo;s favorite growth curves:</p>

<div class="brush: racket">
 <div class="pygments">
  <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._require))" style="color: inherit">require</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._planet))" style="color: inherit">planet</a></span> <span class="n">vyzo/gnuplot</span><span class="p">))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">gplot</span> <span class="p">(</span><span class="n">gnuplot-spawn</span><span class="p">))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">data</span> 
  <span class="p">(</span><span class="n">gnuplot-data</span>
   <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/private/list..rkt)._build-list))" style="color: inherit">build-list</a></span> <span class="mi">90</span>
     <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" style="color: inherit">lambda</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> 
       <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" style="color: inherit">let</a></span> <span class="p">((</span><span class="n">x</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._add1))" style="color: inherit">add1</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" style="color: inherit">/</a></span> <span class="n">x</span> <span class="mf">10.</span><span class="p">))))</span>
         <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span> <span class="n">x</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._log))" style="color: inherit">log</a></span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" style="color: inherit">*</a></span> <span class="n">x</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._log))" style="color: inherit">log</a></span> <span class="n">x</span><span class="p">))</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._expt))" style="color: inherit">expt</a></span> <span class="n">x</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._expt))" style="color: inherit">expt</a></span> <span class="mi">2</span> <span class="n">x</span><span class="p">)))))))</span>
<span class="c1">;; png output options</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">png</span> <span class="o">'</span><span class="p">(</span><span class="ss">png</span> <span class="ss">enhanced</span> <span class="ss">transparent</span> <span class="ss">font</span> <span class="p">(</span><span class="ss">str</span> <span class="ss">arial</span><span class="p">)))</span>
<span class="c1">;; on screen plot</span>
<span class="p">(</span><span class="n">gnuplot-set</span> <span class="n">gplot</span> <span class="o">'</span><span class="p">(</span><span class="ss">title</span> <span class="p">(</span><span class="ss">str</span> <span class="s2">"growth curves"</span><span class="p">)))</span>
<span class="p">(</span><span class="n">gnuplot-plot</span> <span class="n">gplot</span> 
  <span class="kd">#:range</span> <span class="o">'</span><span class="p">(()</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">1000</span><span class="p">))</span>
  <span class="p">(</span><span class="n">gnuplot-item</span> <span class="n">data</span> <span class="o">'</span><span class="p">(</span><span class="ss">using</span> <span class="p">(</span><span class="ss">seq:</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span> <span class="ss">title</span> <span class="p">(</span><span class="ss">str</span> <span class="s2">"x"</span><span class="p">)</span> <span class="ss">with</span> <span class="ss">line</span><span class="p">))</span>
  <span class="p">(</span><span class="n">gnuplot-item</span> <span class="n">data</span> <span class="o">'</span><span class="p">(</span><span class="ss">using</span> <span class="p">(</span><span class="ss">seq:</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="ss">title</span> <span class="p">(</span><span class="ss">str</span> <span class="s2">"log(x)"</span><span class="p">)</span> <span class="ss">with</span> <span class="ss">line</span><span class="p">))</span>
  <span class="p">(</span><span class="n">gnuplot-item</span> <span class="n">data</span> <span class="o">'</span><span class="p">(</span><span class="ss">using</span> <span class="p">(</span><span class="ss">seq:</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span> <span class="ss">title</span> <span class="p">(</span><span class="ss">str</span> <span class="s2">"xlog(x)"</span><span class="p">)</span> <span class="ss">with</span> <span class="ss">line</span><span class="p">))</span>
  <span class="p">(</span><span class="n">gnuplot-item</span> <span class="n">data</span> <span class="o">'</span><span class="p">(</span><span class="ss">using</span> <span class="p">(</span><span class="ss">seq:</span> <span class="mi">1</span> <span class="mi">4</span><span class="p">)</span> <span class="ss">title</span> <span class="p">(</span><span class="ss">str</span> <span class="s2">"x^2"</span><span class="p">)</span> <span class="ss">with</span> <span class="ss">line</span><span class="p">))</span>
  <span class="p">(</span><span class="n">gnuplot-item</span> <span class="n">data</span> <span class="o">'</span><span class="p">(</span><span class="ss">using</span> <span class="p">(</span><span class="ss">seq:</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">)</span> <span class="ss">title</span> <span class="p">(</span><span class="ss">str</span> <span class="s2">"2^x"</span><span class="p">)</span> <span class="ss">with</span> <span class="ss">line</span><span class="p">)))</span>
<span class="c1">;; replot to png</span>
<span class="p">(</span><span class="n">gnuplot-hardcopy</span> <span class="n">gplot</span> <span class="s2">"/tmp/grow.png"</span> <span class="kd">#:term</span> <span class="n">png</span><span class="p">)</span>
<span class="c1">;; redo with logscale</span>
<span class="p">(</span><span class="n">gnuplot-set</span> <span class="n">gplot</span> <span class="o">'</span><span class="p">(</span><span class="ss">logscale</span> <span class="ss">y</span><span class="p">))</span>
<span class="p">(</span><span class="n">gnuplot-replot</span> <span class="n">gplot</span><span class="p">)</span>
<span class="p">(</span><span class="n">gnuplot-hardcopy</span> <span class="n">gplot</span> <span class="s2">"/tmp/loggrow.png"</span> <span class="kd">#:term</span> <span class="n">png</span><span class="p">)</span>
</pre></div>

</div></div>
  <a class="more" href='/2008/11/simple-gnuplotting.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>21 Nov 2008</p></col-1>

<col-2>
  <h1><a href='/2008/11/plt-scheme-v413.html'>PLT Scheme v4.1.3</a></h1>
  <div class="truncate">
<p><em>posted by Eli Barzilay</em></p>

<p>PLT Scheme version 4.1.3 is now available from  <a href="http://plt-scheme.org/">http://plt-scheme.org/</a> This is a bug-fix release.</p>

<p>Notable changes:</p>

<ul>
 <li>Web Server:</li>
 <li>Documentation rewritten to separate servlet APIs and server extension APIs</li>
 <li>HTTPS supported on the &ldquo;plt-web-server&rdquo; command-line with "&mdash;ssl" option</li>
 <li>Stateless servlets supported in default configuration through &rsquo;stateless interface-version</li>
 <li>`web-server/servlet-env&rsquo; supports top-level servlets through #:servlet-path</li>
 <li>Servlets are served from anywhere in the htdocs directory by default</li>
 <li>A template system based on the Scribble syntax has been added, see web-server/templates in the documentationAnd many other internal modifications to make extension easier!</li></ul>

<p>[Note that mirror sites can take a while to catch up with the new downloads.]</p>

<p>Feedback Welcome.</p></div>
  <a class="more" href='/2008/11/plt-scheme-v413.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>28 Oct 2008</p></col-1>

<col-2>
  <h1><a href='/2008/10/plt-scheme-v412.html'>PLT Scheme v4.1.2</a></h1>
  <div class="truncate">
<p><em>posted by Eli Barzilay</em></p>

<p>PLT Scheme version 4.1.2 is now available from  <a href="http://plt-scheme.org/">http://plt-scheme.org/</a> This is a bug-fix release.</p>

<p>[Note that mirror sites can take a while to catch up with the new downloads.]</p>

<p>Feedback Welcome.</p></div>
  <a class="more" href='/2008/10/plt-scheme-v412.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>06 Oct 2008</p></col-1>

<col-2>
  <h1><a href='/2008/10/web-application-development-in-plt-scheme.html'>Web Application Development in PLT Scheme</a></h1>
  <div class="truncate">
<p><em>posted by Jay McCarthy</em></p>

<p>Many users often post to the <code>plt-scheme</code> mailing list asking for introductions to Web application development in PLT Scheme. They&rsquo;ve heard of the continuation-based PLT Web Server and want a gentle introduction. Unfortunately, there has been a distinct lack of good documentation and tutorials for the server. Taking the cue from two users: <a href="http://www.scheme.dk/blog/2007/01/introduction-to-web-development-with.html">Jens Axel Soegaard</a> and <a href="http://alwaysmovefast.com/category/plt-scheme/">David Reynolds</a>, we&rsquo;ve written a tutorial with Danny Yoo.</p>

<p>The tutorial is available at <a href="http://docs.plt-scheme.org/continue/index.html">http://docs.plt-scheme.org/continue/index.html</a>. It walks through the creation of a blog application, introducing features slowly and culminates in an SQL-backed database for the posts. Of particular interest, is the <a href="http://docs.plt-scheme.org/web-server/insta.html">fast start servlet setup</a> based on the Instaservlet package from <a href="http://www.untyped.com/">Untyped</a>.</p>

<p>Please take a look and pass along this as a pointer to those who may be interested in PLT Scheme.</p></div>
  <a class="more" href='/2008/10/web-application-development-in-plt-scheme.html'>more →</a>
<col-2>

</row>

</article>
<article class="index" id="home">
<row>

<col-1>
  <p class='date-and-tags'>05 Oct 2008</p></col-1>

<col-2>
  <h1><a href='/2008/10/plt-scheme-v411.html'>PLT Scheme v4.1.1</a></h1>
  <div class="truncate">
<p><em>posted by Eli Barzilay</em></p>

<p>PLT Scheme version 4.1.1 is now available from  <a href="http://plt-scheme.org/">http://plt-scheme.org/</a>Notable changes:</p>

<ul>
 <li>
  <p>web-server: New servlet development tutorial; quick launching of servlets from DrScheme via the `web-server/insta&rsquo; language; new form abstraction through formlets.</p></li>
 <li>
  <p>misc: mzc can &ldquo;decompile&rdquo; bytecode files; `#lang&rsquo; lines wired to the top of DrScheme&rsquo;s definition window; improved searching in DrScheme; some foreign interface extensions.[Note that mirror sites can take a while to catch up with the new downloads.]</p></li></ul>

<p>Feedback Welcome.</p></div>
  <a class="more" href='/2008/10/plt-scheme-v411.html'>more →</a>
<col-2>

</row>

</article>
<footer>
 <ul class="pagination">
  <li><a href="/index-9.html">
    <quote>&larr;</quote></a></li>
  <li><a href="/index.html">1</a></li>
  <li><a href="/index-2.html">2</a></li>
  <li><a href="/index-3.html">3</a></li>
  <li><a href="/index-4.html">4</a></li>
  <li><a href="/index-5.html">5</a></li>
  <li><a href="/index-6.html">6</a></li>
  <li><a href="/index-7.html">7</a></li>
  <li><a href="/index-8.html">8</a></li>
  <li><a href="/index-9.html">9</a></li>
  <li class="active"><a href="/index-10.html">10</a></li>
  <li><a href="/index-11.html">11</a></li>
  <li><a href="/index-12.html">12</a></li>
  <li><a href="/index-13.html">13</a></li>
  <li><a href="/index-14.html">14</a></li>
  <li><a href="/index-11.html">
    <quote>&rarr;</quote></a></li></ul></footer>

<row class="one-column" id="bottom"><col-1></col-1><col-2>
<p>Made with <a href="https://github.com/greghendershott/frog">Frog</a>, a static-blog generator written in Racket.
<br /><a href="https://github.com/racket/racket-lang-org">Source code</a> for this blog.</col-2></row>
  </body>
</html>